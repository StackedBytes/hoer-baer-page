{% assign header_lang = page.lang | default: "en" %}
{% assign header_texts = site.data.i18n[header_lang] | default: site.data.i18n.en %}
{% assign home_url = "/" %}
{% if header_lang == "de" %}
	{% assign home_url = "/de/" %}
{% endif %}
{% assign header_pages = site.pages | where: "include_in_header", true | where: "lang", header_lang %}
{% assign language_en_url = "/" %}
{% assign language_de_url = "/de/" %}
{% if page.translation_key %}
	{% assign de_translation_candidates = site.pages | where: "translation_key", page.translation_key | where: "lang", "de" %}
	{% assign de_translation_page = de_translation_candidates | first %}
	{% if de_translation_page %}
		{% assign language_de_url = de_translation_page.url %}
	{% endif %}
	{% assign en_translation_candidates = site.pages | where: "translation_key", page.translation_key | where: "lang", "en" %}
	{% assign en_translation_page = en_translation_candidates | first %}
	{% if en_translation_page %}
		{% assign language_en_url = en_translation_page.url %}
	{% endif %}
{% endif %}
{% assign nav_class = "scroll" %}
{% if header_pages.size == 0 %}
	{% assign nav_class = "scroll languageOnly" %}
{% endif %}
<header>
	<div class="logo">
		<div class="appIconShadow">
			<svg width="0" height="0">
				<defs>
					<clipPath id="shape">
							<path id="shape" class="cls-1" d="M6181.23,233.709v-1.792c0-.5-0.02-1-0.02-1.523a24.257,24.257,0,0,0-.28-3.3,11.207,11.207,0,0,0-1.04-3.132,10.683,10.683,0,0,0-1.95-2.679,10.384,10.384,0,0,0-2.68-1.943,10.806,10.806,0,0,0-3.13-1.038,19.588,19.588,0,0,0-3.3-.285c-0.5-.017-1-0.017-1.52-0.017h-22.39c-0.51,0-1.01.017-1.53,0.017a24.041,24.041,0,0,0-3.3.285,11.009,11.009,0,0,0-3.13,1.038,10.491,10.491,0,0,0-4.62,4.622,10.893,10.893,0,0,0-1.04,3.132,19.2,19.2,0,0,0-.28,3.3c-0.02.5-.02,1-0.02,1.523v22.392c0,0.5.02,1,.02,1.524a24.257,24.257,0,0,0,.28,3.3,10.9,10.9,0,0,0,1.04,3.132,10.491,10.491,0,0,0,4.62,4.622,11.04,11.04,0,0,0,3.13,1.038,19.891,19.891,0,0,0,3.3.285c0.51,0.017,1.01.017,1.53,0.017h22.39c0.5,0,1-.017,1.52-0.017a24.221,24.221,0,0,0,3.3-.285,10.836,10.836,0,0,0,3.13-1.038,10.408,10.408,0,0,0,2.68-1.943,10.683,10.683,0,0,0,1.95-2.679,11.217,11.217,0,0,0,1.04-3.132,20.257,20.257,0,0,0,.28-3.3c0.02-.5.02-1,0.02-1.524v-20.6h0Z" transform="translate(-6131 -218)"/>
					</clipPath>
				</defs>
			</svg>
			{% if page.url != home_url %}
				<a href="{{ home_url | relative_url }}"><img class="headerIcon" src="{{ site.app_icon | relative_url }}" alt="{{ header_texts.app_icon_alt | default: 'App icon' }}" data-prefer-api="true"></a>
			{% else %}
				<img class="headerIcon" src="{{ site.app_icon | relative_url }}" alt="{{ header_texts.app_icon_alt | default: 'App icon' }}" data-prefer-api="true">
			{% endif %}
		</div>
		<p class="headerName">HÃ¶rBÃ¤r</p>
	</div>
	<nav class="{{ nav_class }}">
		<ul>
			{% for header_page in header_pages %}
				<li><a href="{{ header_page.url | relative_url }}">{{ header_page.title }}</a></li>
			{% endfor %}
			<li class="langSwitchItem">
				<details class="langPicker">
					<summary class="langPickerToggle" aria-label="{% if header_lang == 'de' %}Sprache wÃ¤hlen{% else %}Select language{% endif %}">
						<span class="langSwitchFlag" aria-hidden="true">ğŸŒ</span>
					</summary>
					<div class="langPickerMenu">
						<div class="langPickerTitle">{% if header_lang == "de" %}Sprache{% else %}Language{% endif %}</div>
						<a class="langPickerOption{% if header_lang == 'de' %} isActive{% endif %}" href="{{ language_de_url | relative_url }}"{% if header_lang == 'de' %} aria-current="page"{% endif %}>
							<span class="langPickerOptionFlag" aria-hidden="true">ğŸ‡©ğŸ‡ª</span>
							<span>Deutsch</span>
						</a>
						<a class="langPickerOption{% if header_lang == 'en' %} isActive{% endif %}" href="{{ language_en_url | relative_url }}"{% if header_lang == 'en' %} aria-current="page"{% endif %}>
							<span class="langPickerOptionFlag" aria-hidden="true">ğŸ‡ºğŸ‡¸</span>
							<span>English</span>
						</a>
					</div>
				</details>
			</li>
		</ul>
	</nav>
</header>
